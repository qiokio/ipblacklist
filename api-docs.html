<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP黑名单系统 - API文档</title>
    <link rel="stylesheet" href="styles/index.css">
    <style>
        .api-docs {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        .api-docs h1 {
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .api-docs h2 {
            margin-top: 40px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 5px;
        }
        .api-docs h3 {
            margin-top: 30px;
        }
        .api-docs h4 {
            margin-top: 20px;
        }
        .api-docs code {
            background-color: #f5f5f5;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .api-docs pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .api-docs table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .api-docs th, .api-docs td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        .api-docs th {
            background-color: #f5f5f5;
        }
        .api-docs ul {
            margin-left: 20px;
        }
        .back-to-home {
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container api-docs">
        <div class="back-to-home">
            <a href="/" class="btn btn-secondary">返回首页</a>
        </div>
        
        <h1>IP黑名单系统 API接口开发手册</h1>

        <h2 id="目录">目录</h2>
        <ul>
            <li><a href="#概述">概述</a></li>
            <li><a href="#基本信息">基本信息</a></li>
            <li><a href="#api端点">API端点</a></li>
            <li><a href="#认证api">认证API</a></li>
            <li><a href="#错误处理">错误处理</a></li>
            <li><a href="#示例代码">示例代码</a></li>
            <li><a href="#开发指南">开发指南</a></li>
        </ul>

        <h2 id="概述">概述</h2>
        <p>IP黑名单系统提供一组API，允许外部应用程序查询和管理IP黑名单。本手册详细介绍了可用的API端点、请求方法、参数和响应格式。</p>

        <h2 id="基本信息">基本信息</h2>
        <ul>
            <li><strong>基础URL</strong>: <code>https://您的域名</code></li>
            <li><strong>认证方式</strong>: JWT认证，通过<code>Authorization</code>头传递令牌</li>
            <li><strong>响应格式</strong>: 所有API返回JSON格式</li>
            <li><strong>跨域支持</strong>: 所有API支持CORS跨域请求</li>
        </ul>

        <h2 id="api端点">API端点</h2>
        
        <h3>1. 检查IP黑名单状态</h3>
        <h4>请求</h4>
        <pre><code>GET /api/blacklist/check-external</code></pre>
        <p><strong>参数:</strong></p>
        <table>
            <tr>
                <th>参数</th>
                <th>类型</th>
                <th>必须</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>ip</td>
                <td>string</td>
                <td>否</td>
                <td>要检查的IP地址，如不提供则使用访问者当前IP</td>
            </tr>
        </table>
        <h4>响应</h4>
        <pre><code>{
  "ip": "192.168.1.1",
  "blocked": false,
  "message": "此IP未被封禁"
}</code></pre>
        <p><strong>字段说明:</strong></p>
        <table>
            <tr>
                <th>字段</th>
                <th>类型</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>ip</td>
                <td>string</td>
                <td>被查询的IP地址</td>
            </tr>
            <tr>
                <td>blocked</td>
                <td>boolean</td>
                <td>是否在黑名单中</td>
            </tr>
            <tr>
                <td>message</td>
                <td>string</td>
                <td>状态描述信息</td>
            </tr>
        </table>
        <p><strong>状态码</strong></p>
        <ul>
            <li><code>200 OK</code>: 请求成功</li>
            <li><code>400 Bad Request</code>: 请求参数错误</li>
            <li><code>500 Internal Server Error</code>: 服务器内部错误</li>
        </ul>

        <h3>2. 基于API密钥的IP黑名单查询</h3>
        <h4>请求</h4>
        <pre><code>GET /api/blacklist/check-api</code></pre>
        <p><strong>参数:</strong></p>
        <table>
            <tr>
                <th>参数</th>
                <th>类型</th>
                <th>必须</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>ip</td>
                <td>string</td>
                <td>否</td>
                <td>要检查的IP地址，如不提供则使用访问者当前IP</td>
            </tr>
            <tr>
                <td>key</td>
                <td>string</td>
                <td>是</td>
                <td>API密钥，用于认证请求</td>
            </tr>
        </table>
        <h4>响应</h4>
        <pre><code>{
  "ip": "192.168.1.1",
  "blocked": false,
  "message": "IP 192.168.1.1 不在黑名单中"
}</code></pre>

        <div class="back-to-home">
            <a href="/" class="btn btn-secondary">返回首页</a>
        </div>
    </div>

    <script type="module">
        // 检查用户登录状态并更新UI
        document.addEventListener('DOMContentLoaded', () => {
            // 登录状态处理逻辑（如需要）
        });
    </script>
</body>
</html> 